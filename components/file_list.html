<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>List</title>
    <link href="../css/mui.min.css" rel="stylesheet" />
    <link href="../libs/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
</head>

<body>
    <div class="mui-content">
        
    </div>

    <script src="../js/rem.js"></script>
    <script src="../js/events.js"></script>
    <script src="../js/mui.min.js"></script>
    <script src="./file_list.js"></script>
    
    <script type="text/javascript">
        mui.init();
        mui.plusReady(function () {
            var self = plus.webview.currentWebview();
            _page.path = self.path;
            // 如果路径有误，使用默认路径
            if (typeof _page.path !== "string" || !_page.path.trim() || _page.path.indexOf("/") !== 0) {
                plus.io.requestFileSystem(plus.io.PUBLIC_DOCUMENTS, function (fs) {
                    _page.intoDirectory(fs.root);
                }, function (exception) {

                });
            } else {
                // 使用初始化参数提供的路径
                plus.io.resolveLocalFileSystemURL("file://" + path, function (entry) {
                    _page.intoDirectory(entry);
                }, function (exception) {

                });
            }

            // 点击左上角返回按钮到上级目录
            window.addEventListener(Events.pathup, function (event) {
                console.log(event);
            });
        });

    </script>
</body>

</html>